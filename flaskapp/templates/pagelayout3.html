<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <title>flask+d3 Hello World</title>

    <script src="http://d3js.org/d3.v2.js"></script>
    <style>

    #intro  {
        padding:3em;
    }

    path.line {
        fill: none;
        stroke: #666;
        stroke-width: 1.5px;
    }

    .domain {
        stroke-width: 1px;
    }

    circle {
        cursor: pointer;
    }

    .axis {
        shape-rendering: crispEdges;
    }

    .axis line, .axis path {
        stroke-width: 1px;
        stroke: #000;
        fill: none;
    }

    .tooltip {
        display: none;
    }

    .tooltip.active {
        display: block;
    }

    .tooltip rect {
        fill: #ff0000;
    }

        </style>

</head>

<body>

<a href="https://github.com/cranmer/flask-d3-hello-world"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>


    <h1>Simple example using d3.js &amp; Flask</h1>
    <div id="intro">This webpage uses d3 to draw some circles.  The data are generated on the fly by a simple flask application.  You can update the mean of the (x,y) pairs with the form.  This info is passed via ?mux=&lt;value&gt;&amp;muy=&lt;value&gt; which flask grabs, passes in rendering the template (which is used to fill out the form and in the all-important url to fetch the data via a d3.json() call. Of course, d3 coudl easily generate some random data by itself, but that's not the point of the exercise.</div>



    <div id="info">
        <div id="point-info">
            Click on a point.
        </div>
    </div>

    <div id="plot">
    </div>


    <script>

        var width = 960,
            height = 500;

        var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)

        d3.json({{data}}, function(json) {
            /* Define the data for the circles */
            var elem = svg.selectAll("g")
                .data(json.nodes)

            /*Create and place the "blocks" containing the circle and the text */  
            var elemEnter = elem.enter()
                .append("g")
                .attr("transform", function(d){return "translate("+d.x+",80)"})

            /*Create the circle for each block */
            var circle = elemEnter.append("circle")
                .attr("r", function(d){return d.r} )
                .attr("stroke","black")
                .attr("fill", "white")

            /* Create the text for each block */
            elemEnter.append("text")
                .attr("dx", function(d){return -20})
                .text(function(d){return d.label})
        })



    </script>

</body>
</html>
